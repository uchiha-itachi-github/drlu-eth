{"version":3,"file":"static/js/26.chunk.js","sources":["/Users/linyitang/github/newWallet2/src/page/dapp/voting/createProject.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport { observer, inject } from 'mobx-react'\nimport Config from '../../../contract/config.json';\nimport * as ethers from 'ethers/index.js';\n\n\n@inject('ethereumStore')\n@observer\nexport default class CreateProject extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            title: '',\n            number: 1,\n            candidates: []\n        };\n        this.provider = this.props.ethereumStore.provider;\n        this.contract = new ethers.Contract(Config.voting[3].contractAddress, Config.voting.abi, this.provider)\n    }\n    submit = async() => {\n        let signer = this.contract.connect(this.props.ethereumStore.wallet.connect(this.provider));\n        let tx = await signer.init(this.state.title,this.state.candidates);\n        alert('txid: ' + tx.hash);\n    }\n    \n\n    render() {\n        let candidates = []\n        for (let i = this.state.number; i-- > 0;) {\n            candidates.push(\n                <div className=\"form-group\" key={i}>\n                    <label className=\"control-label\">候選名稱{i + 1}</label>\n                    <input\n                        className=\"form-control\"\n                        type=\"name\"\n                        value={this.state.candidates[i]}\n                        onChange={(e) => {\n                            this.state.candidates[i] = e.target.value;\n                        }}\n                    />\n                </div>\n            )\n        }\n        candidates.reverse()\n        return (\n            <div className=\"col-xs-6 col-md-4 col-lg-3\">\n                <div className=\"box box-primary\">\n                    <div className=\"box-header\">\n                        建立投票\n                    </div>\n                    <div className=\"box-body\">\n                    <div className=\"form-group\">\n                    <label className=\"control-label\">投票抬頭</label>\n                            <input\n                                className=\"form-control\"\n                                type=\"text\"\n                                value={this.state.title}\n                                onChange={(e) => {\n                                    this.state.title = e.target.value;\n                                    this.forceUpdate()\n                                }}\n                            />\n                            </div>\n                        <div className=\"form-group\">\n                            <label className=\"control-label\">候選數量</label>\n                            <input\n                                className=\"form-control\"\n                                type=\"number\"\n                                value={this.state.number}\n                                onChange={(e) => {\n                                    this.state.number = e.target.value;\n                                    this.state.candidates.length = Number(this.state.number);\n                                    this.forceUpdate()\n                                }}\n                            />\n                        </div>\n                        {candidates}\n                    </div>\n                    <div className=\"box-footer\">\n                        <button className=\"btn btn-primary\" onClick={this.submit}>送出</button>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\nexport { CreateProject };"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAKA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAUA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAEA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AARA;AACA;AACA;AACA;AAHA;AAKA;AACA;AARA;AASA;AACA;;;AAOA;AAAA;AACA;AAAA;AACA;AAFA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AANA;AACA;AACA;AAAA;AAcA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;;;;;;;;;;;AA5EA;AAAA;AA8EA;;;;;;;;;;;;AA9EA;;;;;;;;;A","sourceRoot":""}