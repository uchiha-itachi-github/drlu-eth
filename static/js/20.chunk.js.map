{"version":3,"file":"static/js/20.chunk.js","sources":["/Users/linyitang/github/newWallet2/src/page/dapp/electronicDocument/manage.jsx"],"sourcesContent":["import React, { Component } from 'react';\n// import config from './config.json';\n// import * as weblib from '../../lib/web3.ts';\nimport { observer } from 'mobx-react'\n@observer\nexport default class Manage extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            isOwner: false,\n            lockName: '',\n            addOwner: '',\n            removeOwner: '',\n            changeRequirement: '',\n            name: '',\n            title: '',\n        }\n        // let EDContract = props.ethereumState.web3.eth.contract(config.ABI);\n        // this.EDInstance = EDContract.at(config.contractAddress);\n        // this.addOwner = this.addOwner.bind(this)\n        // this.removeOwner = this.removeOwner.bind(this)\n        // this.changeRequirement = this.changeRequirement.bind(this)\n        // this.setTitle = this.setTitle.bind(this)\n        // this.setName = this.setName.bind(this)\n    }\n\n    // componentWillMount = () => {\n    //     let name;\n    //     let title;\n    //     this.timer = setInterval(() => {\n    //         if (this.props.ethereumStore.address) {\n    //             this.EDInstance['isOwner'].call(this.props.ethereumStore.address, (e, r) => {\n    //                 this.setState({ isOwner: r })\n    //             })\n    //             this.EDInstance['peopleName'].call(this.props.ethereumStore.address, (e, r) => {\n    //                 if (name != r) {\n    //                     name = r;\n    //                     this.setState({ name: r });\n    //                 }\n    //             })\n    //             this.EDInstance['peopleTitle'].call(this.props.ethereumStore.address, (e, r) => {\n    //                 if (title != r) {\n    //                     title = r;\n    //                     this.setState({ lockName: r });\n    //                 }\n    //             })\n    //         }\n    //     }, 1000)\n\n    // }\n\n    componentWillUnmount() {\n        clearInterval(this.timer);\n    }\n\n    sign = (data) => {\n        let jsonTx = this.props.ethereumState.getJsonTx(this.props.ethereumStore.address, config.contractAddress, 0, data)\n        console.log(jsonTx)\n        let txSign;\n        let tx;\n        if (this.props.ethereumState.gasLimit === \"auto\") {\n            this.props.ethereumState.getGasLimit(jsonTx).then((gasLimit) => {\n                tx = this.props.ethereumState.getTx(jsonTx, this.props.ethereumState.gasPrice, gasLimit)\n                txSign = this.props.ethereumState.sign(new Buffer(this.props.ethereumStore.privateKeyHex, 'hex'), tx);\n                this.props.ethereumState.sendTx(txSign).then((txid) => alert(`交易: ${txid} 已發送`));\n            }, console.log)\n        } else {\n            tx = this.props.ethereumState.getTx(jsonTx, this.props.ethereumState.gasPrice, this.props.ethereumState.gasLimit)\n            txSign = this.props.ethereumState.sign(new Buffer(this.props.ethereumStore.privateKeyHex, 'hex'), tx);\n            this.props.ethereumState.sendTx(txSign).then((txid) => alert(`交易: ${txid} 已發送`));\n        }\n    }\n\n    addOwner = (e) => {\n        e.preventDefault();\n        let data = this.EDInstance['addOwner'].getData(this.state.addOwner)\n        this.sign(data);\n    }\n    removeOwner = (e) => {\n        e.preventDefault();\n        let data = this.EDInstance['removeOwner'].getData(this.state.removeOwner)\n        this.sign(data);\n    }\n    changeRequirement = (e) => {\n        e.preventDefault();\n        let data = this.EDInstance['changeRequirement'].getData(this.state.changeRequirement)\n        this.sign(data);\n    }\n    setTitle = (e) => {\n        e.preventDefault();\n        let data = this.EDInstance['setTitle'].getData(this.state.address, this.state.title)\n        this.sign(data);\n    }\n    setName = (e) => {\n        e.preventDefault();\n        let data = this.EDInstance['setName'].getData(this.state.name)\n        this.sign(data);\n    }\n    render() {\n        let item = [<div className=\"box box-primary\">\n            <div className=\"box-header with-border\">\n                <h3 className=\"box-title\">增加擁有者</h3>\n            </div>\n            <div className=\"box-body\">\n                <div className=\"form-group\" >\n                    <input className=\"form-control\" placeholder=\"Address\" onChange={(e) => { this.state.addOwner = e.target.value }} />\n                </div>\n            </div>\n            <div className=\"box-footer\">\n                <button className=\"btn btn-primary\" onClick={this.addOwner}>送出</button>\n            </div>\n        </div>,\n        <div className=\"box box-danger\">\n            <div className=\"box-header with-border\">\n                <h3 className=\"box-title\">刪除擁有者</h3>\n            </div>\n            <div className=\"box-body\">\n                <div className=\"form-group\" >\n                    <input className=\"form-control\" placeholder=\"Address\" onChange={(e) => { this.state.removeOwner = e.target.value }} />\n                </div>\n            </div>\n            <div className=\"box-footer\">\n                <button className=\"btn btn-primary\" onClick={this.removeOwner}>送出</button>\n            </div>\n        </div>,\n        <div className=\"box box-warning\">\n            <div className=\"box-header with-border\">\n                <h3 className=\"box-title\">改變核准數</h3>\n            </div>\n            <div className=\"box-body\">\n                <div className=\"form-group\" >\n                    <input className=\"form-control\" placeholder=\"Number\" onChange={(e) => { this.state.changeRequirement = e.target.value }} />\n                </div>\n            </div>\n            <div className=\"box-footer\">\n                <button className=\"btn btn-primary\" onClick={this.changeRequirement}>送出</button>\n            </div>\n        </div>,\n        <div className=\"box box-primary\">\n            <div className=\"box-header with-border\">\n                <h3 className=\"box-title\">設定頭銜</h3>\n            </div>\n            <div className=\"box-body\">\n                <div className=\"form-group\" >\n                    <input\n                        className=\"form-control\"\n                        placeholder=\"Address\"\n                        onChange={(e) => {\n                            this.state.address = e.target.value\n                            this.EDInstance['peopleTitle'].call(this.state.address, (e, r) => {\n                                this.setState({ title: r })\n                            })\n                        }} />\n                    <input className=\"form-control\" placeholder={this.state.title || 'Title'} onChange={(e) => { this.setState({ title: e.target.value }) }} />\n                </div>\n            </div>\n            <div className=\"box-footer\">\n                <button className=\"btn btn-primary\" onClick={this.setTitle}>送出</button>\n            </div>\n        </div>]\n        return (\n            <form>\n                <div className=\"box box-danger\">\n                    <div className=\"box-header with-border\">\n                        <h3 className=\"box-title\">設定我的名字</h3>\n                    </div>\n                    <div className=\"box-body\">\n                        <div className=\"form-group\" >\n                            <input\n                                className=\"form-control\"\n                                placeholder=\"Name\"\n                                disabled={this.state.lockName}\n                                value={this.state.name + (this.state.lockName && `(${this.state.lockName})`)}\n                                onChange={(e) => { this.setState({ name: e.target.value }) }}\n                            />\n                        </div>\n                    </div>\n                    <div className=\"box-footer\">\n                        <button className=\"btn btn-primary\" onClick={this.setName}>送出</button>\n                    </div>\n                </div>\n                {this.state.isOwner && item}\n            </form>\n        )\n    }\n}\nexport { Manage };"],"mappings":"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","sourceRoot":""}